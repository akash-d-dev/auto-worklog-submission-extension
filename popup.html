<!DOCTYPE html>
<html>
<head>
  <title>Auto Worklog Config</title>
  <style>
    body {
      width: 400px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 15px;
      background-color: #f9f9f9;
    }
    h2 {
      text-align: center;
      color: #333;
    }
    .status-container {
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 5px;
      background-color: #e0e0e0;
      text-align: center;
      font-weight: bold;
    }
    .status-active {
      background-color: #d4edda;
      color: #155724;
    }
    .status-inactive {
      background-color: #f8d7da;
      color: #721c24;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: 600;
      color: #555;
    }
    .task-entry {
      width: 100%;
      height: 60px;
      margin-bottom: 10px;
      padding: 8px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-family: inherit;
      resize: vertical;
    }
    button {
      width: 100%;
      padding: 10px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 10px;
    }
    button:hover {
      background-color: #0056b3;
    }
    .info-text {
        font-size: 12px;
        color: #777;
        margin-bottom: 10px;
    }
    #tasks-container {
        margin-top: 5px;
    }
    #token-scroll-container {
        scrollbar-width: none; /* Firefox */
    }
    #token-scroll-container::-webkit-scrollbar {
        height: 4px;
        display: none; /* Chrome, Safari */
    }
    #token-scroll-container:hover::-webkit-scrollbar {
        display: block;
    }
    #token-scroll-container:hover {
        scrollbar-width: thin; /* Firefox */
    }
    #token-scroll-container::-webkit-scrollbar-thumb {
        background: rgba(255,255,255,0.5);
        border-radius: 2px;
    }
    #captured-token-scroll {
        scrollbar-width: none;
        overflow-y: hidden;
    }
    #captured-token-scroll::-webkit-scrollbar {
        height: 4px;
        display: none;
    }
    #captured-token-scroll::-webkit-scrollbar:vertical {
        display: none;
        width: 0;
    }
    #captured-token-scroll:hover::-webkit-scrollbar {
        display: block;
    }
    #captured-token-scroll:hover::-webkit-scrollbar:vertical {
        display: none;
        width: 0;
    }
    #captured-token-scroll:hover {
        scrollbar-width: thin;
    }
    #captured-token-scroll::-webkit-scrollbar-thumb {
        background: rgba(0,100,0,0.4);
        border-radius: 2px;
    }
  </style>
</head>
<body>
  <h2>Auto Worklog Submitter</h2>
  
  <div id="status" class="status-container status-inactive">
    <div id="status-text">Auth Token: Not Found</div>
    <div id="captured-token-scroll" style="display: none; overflow-x: auto; max-width: 100%; white-space: nowrap; margin-top: 6px;">
      <code id="captured-token-value" style="background: rgba(0,0,0,0.15); padding: 2px 6px; border-radius: 3px; font-size: 9px;">-</code>
    </div>
  </div>

  <div class="info-text">
    Browse <a href="https://app.kalvium.community/livebooks?semester=1" target="_blank" style="color: #007bff; text-decoration: underline;">app.kalvium.community/livebooks</a> to capture your Auth Token automatically.
  </div>

  <!-- User Info Section -->
  <div id="user-info-section" style="display: none; margin-bottom: 15px; padding: 12px; border-radius: 6px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
    <h4 style="margin: 0 0 10px 0; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,0.3); padding-bottom: 6px;">User Info</h4>
    <div style="font-size: 12px; line-height: 1.8;">
      <div><strong>Email:</strong> <span id="info-email">-</span></div>
      <div style="display: flex; align-items: center; gap: 6px;">
        <strong>Token:</strong>
        <div id="token-scroll-container" style="overflow-x: auto; max-width: 280px; white-space: nowrap;">
          <code id="info-token" style="background: rgba(0,0,0,0.2); padding: 2px 6px; border-radius: 3px; font-size: 10px;">-</code>
        </div>
      </div>
      <div><strong>Registered:</strong> <span id="info-created">-</span></div>
      <div><strong>Token Updated:</strong> <span id="info-updated">-</span></div>
      <div><strong>Last Submitted:</strong> <span id="info-last-submitted">-</span></div>
      <div><strong>Using Latest Token:</strong> <span id="info-using-latest">-</span></div>
    </div>
  </div>

  <label for="work-mode">Working Mode</label>
  <select id="work-mode" style="width: 100%; padding: 8px; margin-bottom: 15px; border-radius: 4px; border: 1px solid #ccc;">
    <option value="Working Remotely (Not in the Kalvium environment)" selected>Working Remotely (Not in the Kalvium environment)</option>
    <option value="Working out of the Kalvium environment (Classroom)">Working out of the Kalvium environment (Classroom)</option>
    <option value="Working on-site (Company location)">Working on-site (Company location)</option>
    <!-- <option value="Today was a company Holiday">Today was a company Holiday</option>
    <option value="Took an approved leave from work">Took an approved leave from work</option> -->
  </select>

  <label>Worklog Tasks (Randomly selected daily)</label>
  <div id="tasks-container">
    <textarea class="task-entry" placeholder="Task 1: e.g. Fixed bug in payment gateway..."></textarea>
    <textarea class="task-entry" placeholder="Task 2: e.g. Updated API documentation..."></textarea>
    <textarea class="task-entry" placeholder="Task 3: e.g. Team meeting and sprint planning..."></textarea>
  </div>
  
  <button id="add-task-btn" style="background-color: #28a745; margin-bottom: 10px;">+ Add Another Task</button>
  
  <button id="save-btn">Save & Activate</button>

  <button id="deactivate-btn" style="background-color: #dc3545; margin-top: 10px;">Deactivate & Delete</button>
  
  <div id="message" style="margin-top: 10px; text-align: center;"></div>

  <div style="margin-top: 20px; padding: 10px; background: #f5f5f5; border-radius: 6px; border-left: 3px solid #2196f3; font-size: 11px; color: #555; line-height: 1.6;">
    <strong style="color: #1976d2;">Token Info:</strong>
    <ul style="margin: 6px 0 0 0; padding-left: 18px;">
      <li>Your token expires after <strong>~1 month</strong>.</li>
      <li>A fresh token is auto-captured daily when you visit <strong>app.kalvium.community</strong>.</li>
      <li>Click <strong>Save & Activate</strong> to manually sync your latest token to the server or to update your tasks.</li>
    </ul>
  </div>

  <script src="popup.js"></script>
</body>
</html>
